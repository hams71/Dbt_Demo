/*! For license information please see dag.633db96ffad525306af5.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Airflow=t():(e.Airflow=e.Airflow||{},e.Airflow.dag=t())}(self,(()=>(()=>{"use strict";var e={3307:(e,t,a)=>{a.d(t,{R:()=>d,l:()=>o});var n=a(8956);function d(e,t="",a=[],d=null){const o=(0,n.au)("datasets_url");$("#datasets_tbody").empty(),$("#datasets_error").hide(),$("#dag_id").text(e),$("#datasetNextRunModal").modal({}),$("#next_run_summary").text(t),a.forEach((e=>{const t=document.createElement("tr"),a=document.createElement("td"),n=document.createElement("a");n.href=`${o}?dataset_uri=${encodeURIComponent(e.id)}`,n.innerText=e.uri,a.append(n);const d=document.createElement("td");e.lastUpdate&&d.append(isoDateToTimeEl(e.lastUpdate)),t.append(a),t.append(d),$("#datasets_tbody").append(t)})),d&&($("#datasets_error_msg").text(d),$("#datasets_error").show())}function o(e,t,a){let d=(0,n.au)("next_run_datasets_url");e&&(d.includes("__DAG_ID__")&&(d=d.replace("__DAG_ID__",e)),$.get(d).done((e=>{let n=0,d="<strong>Pending datasets:</strong><br>";a(e),e.forEach((e=>{e.created_at||(n<4&&(d+=`${e.uri}<br>`),n+=1)})),n>4&&(d+=`<br>And ${n-4} more.`),d+="<br>Click to see more details.",$(t).attr("data-original-title",(()=>d))})).fail(((e,t,n)=>{const d=e.responseJSON&&e.responseJSON.error||"Something went wrong.";a([],`${t}: ${n} ${d}`)})))}},1068:(e,t,a)=>{a.d(t,{K5:()=>o,o0:()=>d});const n="YYYY-MM-DD, HH:mm:ss z";const d=e=>moment(e).format(n);const o=e=>`${moment(e).fromNow()}`},8956:(e,t,a)=>{a.d(t,{au:()=>n});function n(e){const t=document.querySelector(`meta[name="${e}"]`);return t&&t.getAttribute("content")||""}}},t={};function a(n){var d=t[n];if(void 0!==d)return d.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,a),o.exports}a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};return(()=>{a.r(n),a.d(n,{callModal:()=>S,dagTZ:()=>r});var e=a(8956),t=a(1068),d=a(3307);const o=(0,e.au)("dag_id"),r=(0,e.au)("dag_timezone"),i=(0,e.au)("logs_with_metadata_url"),s=(0,e.au)("external_log_url"),l=(0,e.au)("extra_links_url"),_=(0,e.au)("paused_url"),p={createAfter:(0,e.au)("next_dagrun_create_after"),intervalStart:(0,e.au)("next_dagrun_data_interval_start"),intervalEnd:(0,e.au)("next_dagrun_data_interval_end")};let c,u,m="",x="",g="",f="",h=[];const b="True"===(0,e.au)("show_external_log_redirect");let v,w=[];const k=(e,t)=>{w=e,v=t};$(window).on("load",(function(){$(`a[href*="${this.location.pathname}"]`).parent().addClass("active"),$(".never_active").removeClass("active");const e=$("#next-dataset-tooltip");(0,d.l)(o,e,k)}));const y=Array.from(document.querySelectorAll('a[id^="btn_"][data-base-url]')).reduce(((e,t)=>(e[t.id.replace("btn_","")]=t,e)),{});function I(e,t){let a=e.dataset.baseUrl;t.dag_id&&-1!==e.dataset.baseUrl.indexOf(o)&&(a=a.replace(o,t.dag_id),delete t.dag_id),Object.prototype.hasOwnProperty.call(t,"map_index")&&void 0===t.map_index&&delete t.map_index,e.setAttribute("href",`${a}?${$.param(t)}`)}function A(){I(y.subdag,{dag_id:g,execution_date:x}),I(y.task,{dag_id:o,task_id:m,execution_date:x,map_index:c}),I(y.rendered,{dag_id:o,task_id:m,execution_date:x,map_index:c}),I(y.mapped,{_flt_3_dag_id:o,_flt_3_task_id:m,_flt_3_run_id:f,_oc_TaskInstanceModelView:"map_index"}),y.rendered_k8s&&I(y.rendered_k8s,{dag_id:o,task_id:m,execution_date:x,map_index:c});const e={_flt_3_dag_id:o,_flt_3_task_id:m,_oc_TaskInstanceModelView:"dag_run.execution_date"};c>=0&&(e._flt_0_map_index=c),I(y.ti,e),I(y.log,{dag_id:o,task_id:m,execution_date:x,map_index:c}),I(y.xcom,{dag_id:o,task_id:m,execution_date:x,map_index:c})}function S({taskId:e,executionDate:a,extraLinks:n,tryNumber:d,isSubDag:r,dagRunId:_,mapIndex:p,isMapped:v=!1,mappedStates:w=[]}){m=e;const k=String(window.location);if($("#btn_filter").on("click",(()=>{window.location=function(e,t,a){const n=new RegExp(`([?&])${t}=.*?(&|$)`,"i"),d=-1!==e.indexOf("?")?"&":"?";return e.match(n)?e.replace(n,`$1${t}=${a}$2`):`${e}${d}${t}=${a}`}(k,"root",m)})),x=a,f=_,c=p,u=n,v&&(h=w),$("#dag_run_id").text(_),$("#task_id").text(e),$("#execution_date").text((0,t.o0)(a)),$("#taskInstanceModal").modal({}),$("#taskInstanceModal").css("margin-top","0"),$("#extra_links").prev("hr").hide(),$("#extra_links").empty().hide(),p>=0?($("#modal_map_index").show(),$("#modal_map_index .value").text(p)):($("#modal_map_index").hide(),$("#modal_map_index .value").text("")),r?($("#div_btn_subdag").show(),g=`${o}.${e}`):($("#div_btn_subdag").hide(),g=void 0),p>=0&&!h.length)$("#modal_map_index").show(),$("#modal_map_index .value").text(p),$("#mapped_dropdown").hide();else if(p>=0||v){$("#modal_map_index").show(),$("#modal_map_index .value").text(""),$("#mapped_dropdown").show();const e=c>-1?c:`All  ${h.length} Mapped Instances`;$("#mapped_dropdown #dropdown-label").text(e),$("#mapped_dropdown .dropdown-menu").empty(),$("#mapped_dropdown .dropdown-menu").append(`<li><a href="#" class="map_index_item" data-mapIndex="all">All ${h.length} Mapped Instances</a></li>`),h.forEach(((e,t)=>{$("#mapped_dropdown .dropdown-menu").append(`<li><a href="#" class="map_index_item" data-mapIndex="${t}">${t} - ${e}</a></li>`)}))}else $("#modal_map_index").hide(),$("#modal_map_index .value").text(""),$("#mapped_dropdown").hide();v?($("#task_actions").text(`Task Actions for all ${w.length} instances`),$("#btn_mapped").show(),$("#mapped_dropdown").css("display","inline-block"),$("#btn_rendered").hide(),$("#btn_xcom").hide(),$("#btn_log").hide(),$("#btn_task").hide()):($("#task_actions").text("Task Actions"),$("#btn_rendered").show(),$("#btn_xcom").show(),$("#btn_log").show(),$("#btn_mapped").hide(),$("#btn_task").show()),$("#dag_dl_logs").hide(),$("#dag_redir_logs").hide(),d>0&&!v&&($("#dag_dl_logs").show(),b&&$("#dag_redir_logs").show()),A(),$("#try_index > li").remove(),$("#redir_log_try_index > li").remove();const y=d>2?0:1,I=new URLSearchParams({dag_id:o,task_id:m,execution_date:x,metadata:"null"});void 0!==p&&I.set("map_index",p);for(let e=y;e<d;e+=1){let t=e;0!==e?I.set("try_number",e):t="All",$("#try_index").append(`<li role="presentation" style="display:inline">\n      <a href="${i}?${I}&format=file"> ${t} </a>\n      </li>`),(0!==e||b)&&$("#redir_log_try_index").append(`<li role="presentation" style="display:inline">\n      <a href="${s}?${I}"> ${t} </a>\n      </li>`)}if(I.delete("try_number"),!v&&u&&u.length>0){const e=[];u.sort(),$.each(u,((t,a)=>{I.set("link_name",a);const n=$('<a href="#" class="btn btn-primary disabled"></a>'),d=$('<span class="tool-tip" data-toggle="tooltip" style="padding-right: 2px; padding-left: 3px" data-placement="top" title="link not yet available"></span>');d.append(n),n.text(a),$.ajax({url:`${l}?${I}`,cache:!1,success(e){n.attr("href",e.url),/^(?:[a-z]+:)?\/\//.test(e.url)&&n.attr("target","_blank"),n.removeClass("disabled"),d.tooltip("disable")},error(e){d.tooltip("hide").attr("title",e.responseJSON.error).tooltip("fixTitle")}}),e.push(d)}));const t=$("#extra_links");t.prev("hr").show(),t.append(e).show(),t.find('[data-toggle="tooltip"]').tooltip()}}document.addEventListener("click",(e=>{e.target.matches('button[data-toggle="button"]')&&A()})),$(document).on("click",".map_index_item",(function(){const e=$(this).attr("data-mapIndex");S("all"===e?{taskId:m,executionDate:x,dagRunId:f,extraLinks:u,mapIndex:-1,isMapped:!0,mappedStates:h}:{taskId:m,executionDate:x,dagRunId:f,extraLinks:u,mapIndex:e})})),$("form[data-action]").on("submit",(function(e){e.preventDefault();const t=$(this).get(0);(f||x)&&(t.dag_run_id&&(t.dag_run_id.value=f),t.execution_date&&(t.execution_date.value=x),t.origin.value=window.location,t.task_id&&(t.task_id.value=m),t.map_index&&c>=0?t.map_index.value=c:t.map_index&&t.map_index.remove(),t.action=$(this).data("action"),t.submit())})),$("#pause_resume").on("change",(function(){const e=$(this),t=e.data("dag-id"),a=e.is(":checked"),n=`${_}?is_paused=${a}&dag_id=${encodeURIComponent(t)}`;e.trigger("blur"),e.removeClass("switch-input--error");const d=new CustomEvent("paused",{detail:a});document.dispatchEvent(d),$.post(n).fail((()=>{setTimeout((()=>{e.prop("checked",!a),e.addClass("switch-input--error"),d.value=!a,document.dispatchEvent(d)}),500)}))})),$("#next-run").on("mouseover",(()=>{$("#next-run").attr("data-original-title",(()=>{let e="";return p.createAfter&&(e+=`<strong>Run After:</strong> ${(0,t.o0)(p.createAfter)}<br>`,e+=`Next Run: ${(0,t.K5)(p.createAfter)}<br><br>`),p.intervalStart&&p.intervalEnd&&(e+="<strong>Data Interval</strong><br>",e+=`Start: ${(0,t.o0)(p.intervalStart)}<br>`,e+=`End: ${(0,t.o0)(p.intervalEnd)}`),e}))})),$(".next-dataset-triggered").on("click",(e=>{const t=$(e.target).data("summary");(0,d.R)(o,t,w,v)}))})(),n})()));